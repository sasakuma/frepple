=========================
Setting disk space quotas
=========================

FrePPLe allows to set a quota to limit the usage of the disk space.

This page documents how a quota can be set or monitored and what actions can be done to release some disk space.

* `How is the disk space measured?`_
* `How to set or monitor a quota?`_
* `What happens when the quota is exceeded?`_
* `How to free disk space?`_

*******************************
How is the disk space measured?
*******************************

The disk space is measured as the sum of:

- The disk space used by each active scenario at database level

- | The disk space of the frepple log folder. The frepple log folder contains:
  | - All the execution log files
  | - The interface files that can be imported with the `import data files <../command-reference.html#importfromfolder>`_ command.
  | - The report files generated by the `export plan result <../command-reference.html#exporttofolder>`_ command.
  | - The database dump files generated by the `contact frePPLe support <../command-reference.html#backup>`_ command.

******************************
How to set or monitor a quota?
******************************

The administrator needs to update the MAXSTORAGE variable in the djangosettings.py file
located in the */etc/frepple* folder.

For an on premise installation of frePPLe, the MAXSTORAGE variable is not set by default and the disk space usage is unlimited.

Free trial users have a quota of 1GB during their 30-day evaluation period.

The disk space usage and the allocated quota is visible in the *Help/About FrePPLe* menu.

Log files of task execution are automatically deleted when their storage exceeds
the MAXTOTALLOGFILESIZE setting. When the total size of the exceeds this value
the oldest log files are automatically deleted.

****************************************
What happens when the quota is exceeded?
****************************************

When the quota is exceeded, users won't be able to:

- Import a csv or Excel data file.

- Copy scenarios.

- Import data files through the `import data files <../command-reference.html#importfromfolder>`_ command.

- Export plan result files through the `export data files <../command-reference.html#exporttofolder>`_ command.

***********************
How to free disk space?
***********************

At database level, users can:

| - Release some scenarios.
| - Reduce the forecasting horizon by updating forecast.Horizon_future and forecast.Horizon_history parameters.
| - Delete all data non relevant for planning (E.g: closed sales orders outside forecasting the horizon).
| - Reduce the plan archiving frequency and/or horizon.

At log folder level, users can:

| - Delete the data files imported with the `import data files <../command-reference.html#importfromfolder>`_ command.
| - Delete the plan result files generated by the `export plan result <../command-reference.html#exporttofolder>`_ command.
| - Delete any dump file generated by the `contact frePPLe support <../command-reference.html#backup>`_ command.
